# Удалённое вычисление чисел Фибоначчи

Тестовое задание кандидата на вакансию разработчика C# в **Positive Technologies**.

## Инструкция по применению

Сервер ожидает брокера Rabbit MQ на стандартных потрах и на хосте "rabbitmq". Если его нет в системе - можно воспользоваться docker compose. При запуске в корневой директории репозитория, он запустит Rabbit MQ и "Server" (в терминах задания - приложение №2).

Приложение №1 (в исходном коде - Client) ожидает приложение №2 слушаешие порт 5000. Единственный и необходимый параметр - число, показывающее количество потоков.

### Пример инструкций для запуска

    git clone git@github.com:BearPro/remote-fibonacci-computer.git
    cd remote-fibonacci-computer
    dicker compose up -d
    dotnet run --project .\Client\ -- 32 # 32 - количество асинхронных (и возможно параллельныз) рассчётов

Для отображения информации информации о результате вычислений на клиенте необходимо отредактировать исходный код. На сервере информация о запросах и результатах выводится в `stdout`.

## Примечание

Скромный бенчмарк с помощью `System.Diagnostics.Stopwatch` показал что в целом распределённый алогритм вычисления числа Фибоначчи не эффективен. Помимо очевидных проблем, есть проблоема с запуском параллельных асинхронных задач в нескольких потоках - большую часть времени потоки `await`'ят IO, и планировщик задач настойчиво пытается пихнуть их в один поток. Собственно, при запуске на одной машине и при использовании обычной десктопной сетевой карты - все потоки упераются в эту сетевую карту, создавая таким образом дополнительные расходы на планирование и переключение потоков и задач, не предоставляя пользы в производительности вычисления.

## Задание

Два приложения общаются друг с другом через транспорт, реализуя расчет чисел Фибоначчи.
Логика расчета одной последовательности такая: 

- Первое инициализирует расчет.
- Первое отправляет второму N(i) 
- Второе вычисляет N(i-1) + N(i) и шлет обратно

Логика повторяется симметрично. И так до остановки приложений.

### Особенности
Первое приложение при старте получает параметр – целое число, сколько асинхронных расчетов начать. Все расчеты идут параллельно. 
Передача данных от 1 к 2 идет через Rest WebApi 
Передача данных от 2 к 1 идет посредством MessageBus.Язык C#, среда MS .NET Framework версии от 4.0.

### Рекомендуемые технологии

- REST: ASP.NET WebApi + HttpClient
- MessageBus: RabbitMQ + EasyNetQ.
